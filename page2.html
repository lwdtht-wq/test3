<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>New Techno-Faiths Â· Cyber Religion Evolution</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="style.css">
<script src="https://d3js.org/d3.v7.min.js"></script>
<script defer src="main.js"></script>

<style>
/* ==================== å‘å…‰å¤–æ¡† ==================== */
#chartFrame {
    width: 100%;
    padding: 25px;
    margin-top: 40px;
    border-radius: 14px;
    background: rgba(10,20,35,0.55);
    border: 1px solid #4af1ff88;
    box-shadow: 0 0 22px #4af1ff55 inset, 0 0 25px #4af1ff55;
    backdrop-filter: blur(6px);
}

/* ==================== Cyberpunk æŒ‰é’® ==================== */
#chartControls {
    text-align: center;
    margin-bottom: 20px;
}

#chartControls button {
    background: rgba(15, 30, 50, 0.7);
    border: 1px solid #4af1ff;
    color: #d0e7ff;
    padding: 10px 22px;
    margin: 0 8px;
    border-radius: 8px;
    font-size: 14px;
    cursor: pointer;
    transition: 0.25s;
}

#chartControls button:hover {
    background: rgba(74,241,255,0.25);
    box-shadow: 0 0 12px #4af1ff;
    transform: translateY(-2px);
}

/* Tooltip â€“ æ•°å€¼æ³¡æ³¡ */
.chart-tooltip {
    position: absolute;
    background: rgba(20,30,45,0.9);
    border: 1px solid #4af1ff;
    color: #d0e7ff;
    padding: 6px 12px;
    border-radius: 8px;
    font-size: 13px;
    pointer-events: none;
    display: none;
    z-index: 9999;
    box-shadow: 0 0 10px #4af1ff;
}

/* ä¿®å¤å›¾è¡¨å¤–æ¡†æº¢å‡º â€”â€” neoChart å¿…é¡»æˆä¸ºå¯ç¼©æ”¾å®¹å™¨ */
#neoChart {
    width: 100%;
    overflow: hidden; 
}

/* SVG è‡ªé€‚åº”ç¼©æ”¾ */
#neoChart svg {
    width: 100%;
    height: auto;
    display: block;
}
</style>

</head>
<body>

<!-- ======================= PAGE OPENING ======================= -->
<div class="page-opening">
    <img src="assets/open2.jpg">
    <div class="page-title-overlay glitch" data-text="NEW TECHNO-FAITH SYSTEMS">
        NEW TECHNO-FAITH SYSTEMS
    </div>
</div>

<!-- ======================= FLOATING NAV ======================= -->
<nav id="sideNav" class="hidden">
    <a href="index.html" class="nav-icon" data-label="Home">ğŸœ‚</a>
    <a href="page1.html" class="nav-icon" data-label="Trends">ğŸœ</a>
    <a href="page2.html" class="nav-icon" data-label="New Faiths">âŸŸ</a>
    <a href="page3.html" class="nav-icon" data-label="World Map">ğŸœ„</a>
    <a href="page4.html" class="nav-icon" data-label="Liquid Metal">âŸ</a>
    <a href="page5.html" class="nav-icon" data-label="Story">â››</a>
</nav>

<!-- ======================= CONTENT ======================= -->
<section class="page-panel">

<h2>Rise of Artificial & Techno-Spiritual Belief Systems</h2>

<p>
In the cybernetic era, traditional religions split into new technological branches.
These â€œTechno-Faithsâ€ do not worship gods in the ancient sense; instead, they seek  
truth within data streams, machine consciousness, and quantum-predictive prophecy.
</p>

<p>Below are four major future religions that emerged by the year 2150.</p>

<h3 style="color:#4af1ff;margin-top:40px;">Major Techno-Faiths</h3>

<ul>
<li><strong>Cyber Oracle Network</strong> â€“ A belief system that predicts fate using AI-driven probability engines.</li>
<li><strong>Quantum Throne Sect</strong> â€“ Worships the multiverse as the â€œtrue divine structure.â€</li>
<li><strong>Psionic Union</strong> â€“ A spiritual group achieving collective consciousness through neural implants.</li>
<li><strong>Echo Memory Cult</strong> â€“ A religion centered on digital resurrection through memory unfolding algorithms.</li>
</ul>

<h2 style="margin-top:50px;">Faith Population Distribution in 2150</h2>
<p>This visualization lets you explore the growth of each techno-faith using different chart styles.</p>

<!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å‘å…‰å›¾è¡¨å¤–æ¡† â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="chartFrame">
    <div id="chartControls">
        <button data-type="line">Line Chart</button>
        <button data-type="bar">Bar Chart</button>
        <button data-type="area">Area Chart</button>
    </div>

    <div id="neoChart"></div>
</div>

</section>

<!-- ======================= FINAL FIXED D3 SCRIPT ======================= -->
<script>
// ======================== DATA ==========================
const chartData = [
  { faith: "Cyber Oracle", value: 680 },
  { faith: "Quantum Throne", value: 540 },
  { faith: "Psionic Union", value: 420 },
  { faith: "Echo Memory Cult", value: 310 }
];

// Blue color theme
const colors = {
    cyber:  "rgb(74,140,255)",
    quantum:"rgb(80,200,255)",
    psionic:"rgb(60,255,220)",
    echo:   "rgb(120,180,255)"
};

function getColor(d) {
    if (d.faith === "Cyber Oracle") return colors.cyber;
    if (d.faith === "Quantum Throne") return colors.quantum;
    if (d.faith === "Psionic Union") return colors.psionic;
    if (d.faith === "Echo Memory Cult") return colors.echo;
}

// ======================== FIXED RESPONSIVE SVG ==========================
// Use fixed viewBox for internal drawing logic; SVG auto-scales to container
const baseWidth = 900;
const baseHeight = 430;

const svg = d3.select("#neoChart")
    .append("svg")
    .attr("viewBox", `0 0 ${baseWidth} ${baseHeight}`)
    .attr("preserveAspectRatio", "xMidYMid meet");

const width = baseWidth;
const height = baseHeight;

const margin = { top: 40, right: 40, bottom: 60, left: 120 };

const tooltip = d3.select("body").append("div")
    .attr("class", "chart-tooltip");

function clearChart() { svg.selectAll("*").remove(); }


// =============================================================
//  BAR CHART
// =============================================================
function drawBar() {
    clearChart();

    const x = d3.scaleLinear()
        .domain([0, d3.max(chartData, d=>d.value)])
        .range([margin.left, width - margin.right]);

    const y = d3.scaleBand()
        .domain(chartData.map(d => d.faith))
        .range([margin.top, height - margin.bottom])
        .padding(0.3);

    svg.append("g")
        .attr("transform", `translate(0,${height - margin.bottom})`)
        .call(d3.axisBottom(x))
        .attr("color", "#88c7ff");

    svg.append("g")
        .attr("transform", `translate(${margin.left},0)`)
        .call(d3.axisLeft(y))
        .attr("color", "#88c7ff");

    svg.selectAll(".bar")
        .data(chartData)
        .enter()
        .append("rect")
        .attr("x", margin.left)
        .attr("y", d => y(d.faith))
        .attr("height", y.bandwidth())
        .attr("fill", d => getColor(d))
        .attr("rx", 6)
        .attr("width", 0)
        .transition()
        .duration(900)
        .attr("width", d => x(d.value) - margin.left);
}


// =============================================================
//  LINE CHART
// =============================================================
function drawLineChart() {
    clearChart();

    const x = d3.scalePoint()
        .domain(chartData.map(d => d.faith))
        .range([margin.left, width - margin.right])
        .padding(0.5);

    const y = d3.scaleLinear()
        .domain([0, d3.max(chartData, d => d.value)])
        .range([height - margin.bottom, margin.top]);

    svg.append("g")
        .attr("transform", `translate(0,${height - margin.bottom})`)
        .call(d3.axisBottom(x))
        .attr("color", "#88c7ff");

    svg.append("g")
        .attr("transform", `translate(${margin.left},0)`)
        .call(d3.axisLeft(y))
        .attr("color", "#88c7ff");

    const gradient = svg.append("defs")
        .append("linearGradient")
        .attr("id", "neonLine")
        .attr("x1", "0%").attr("x2", "100%")
        .attr("y1", "0%").attr("y2", "0%");

    gradient.append("stop").attr("offset", "0%").attr("stop-color", "rgb(120,200,255)");
    gradient.append("stop").attr("offset", "100%").attr("stop-color", "rgb(50,140,255)");

    const line = d3.line()
        .x(d => x(d.faith))
        .y(d => y(d.value))
        .curve(d3.curveCatmullRom.alpha(0.6));

    const pathNode = svg.append("path")
        .datum(chartData)
        .attr("fill", "none")
        .attr("stroke", "url(#neonLine)")
        .attr("stroke-width", 4)
        .attr("d", line)
        .style("filter", "drop-shadow(0 0 10px #4af1ff)");

    const totalLength = pathNode.node().getTotalLength();

    pathNode
        .attr("stroke-dasharray", totalLength)
        .attr("stroke-dashoffset", totalLength)
        .transition().duration(1500)
        .attr("stroke-dashoffset", 0);
}


// =============================================================
//  AREA CHART
// =============================================================
function drawArea() {
    clearChart();

    const x = d3.scalePoint()
        .domain(chartData.map(d=>d.faith))
        .range([margin.left,width-margin.right])
        .padding(0.5);

    const y = d3.scaleLinear()
        .domain([0,d3.max(chartData,d=>d.value)])
        .range([height-margin.bottom,margin.top]);

    const defs = svg.append("defs");
    const grad = defs.append("linearGradient")
        .attr("id", "pulseGrad")
        .attr("x1", "0%").attr("x2", "0%")
        .attr("y1", "0%").attr("y2", "100%");

    grad.append("stop").attr("offset", "0%").attr("stop-color", "rgba(120,200,255,0.55)");
    grad.append("stop").attr("offset", "100%").attr("stop-color", "rgba(40,80,140,0.2)");

    const area = d3.area()
        .x(d=>x(d.faith))
        .y0(height-margin.bottom)
        .y1(d=>y(d.value))
        .curve(d3.curveCatmullRom.alpha(0.65));

    svg.append("path")
        .datum(chartData)
        .attr("fill","url(#pulseGrad)")
        .attr("stroke","#4af1ff")
        .attr("stroke-width",2)
        .attr("d",area)
        .style("filter","drop-shadow(0 0 18px #4af1ff)");
}


// ======================== BUTTON EVENTS ==========================
drawBar();

document.querySelectorAll("#chartControls button").forEach(btn => {
    btn.addEventListener("click", () => {
        if (btn.dataset.type === "bar") drawBar();
        if (btn.dataset.type === "line") drawLineChart();
        if (btn.dataset.type === "area") drawArea();
    });
});
</script>

</body>
</html>
